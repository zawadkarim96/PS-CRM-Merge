[build]
# Force Nixpacks to use the sales app subdirectory as the project root.
builder = "NIXPACKS"

# Explicitly run the build and start commands through a shell so we can change
# into the sales app directory. Without the shell wrapper Nixpacks executes the
# command directly, so the `cd` gets interpreted as part of the executable name
# and the container fails to start. The build installs the app requirements.
buildCommand = "bash -lc 'cd PS-SALES-main && python3 -m pip install --upgrade pip && python3 -m pip install -r requirements.txt'"

[deploy]
# Provide the runtime command from the manifest section Railway reads for start
# commands. Keeping the `cd` in the command ensures the Streamlit app launches
# from the sales project directory.
startCommand = "bash -lc 'cd PS-SALES-main && streamlit run sales_app.py --server.port $PORT --server.address 0.0.0.0'"

[variables]
# Use an internal data directory that works on Railway's ephemeral filesystem.
PS_SALES_DATA_DIR = "/workspace/data"
